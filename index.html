<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>To-Do List App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="script" href="index.js">
  </head>
  <body>
    <div class="to-do-app">
      <h1> To Do List </h1>
    <div class="items"> 
    <form>
      <input type="text" id="taskField"required />
      <button id="add-item">add</button>
      <!-- added the urgent button -->
      <button id="urgent-item">urgent</button>
    </form>
    <ol></ol>
    <p></p>
    </div>
    todo: <br />
    - add a live counter for "X total items" <br />
    - add a message conditionally if there are 0 to-do list items<br />
    - add a date to the items, and order them by date<br />
    - filter out all items with the letter "f"<br />
    - highlight tasks that include the word "urgent" in the list <br />
    - make a 2nd list on the screen for some items based on some filter - save
    and load the items in LocalStorage <br />
    - drag and drop items to reorder them
  </div>
  </body>
  <script>
   //updated the priority property 
let tasks = [
    { id: 0, text: "hey",  priority: true },
    { id: 1, text: "hi there", priority: false },
    { id: 2, text: "how was it?",  priority: false },
    { id: 3, text: "ok great",  priority: true }
  ];
  let counter = tasks.length;
  //added condition for urgent
  const updateHTML = () => {
    const htmlTasks = tasks
      .map((task, i) => {
        if (task.priority === true) {
          return `<li id="${task.id}" class = "redText">
          ${task.text}
          <button class="delete-item" id="${task.id}">&#128465;</button>
          </li>`;
        }
        else {
          return `<li id="${task.id}" >
          ${task.text}
          <button class="delete-item" id="${task.id}">&#128465;</button>
          </li>`;
        }
      })
      .join("");
    document.querySelector("ol").innerHTML = htmlTasks;
    // listen to every delete button, remove the objet with its ID
    // from the tasks array
    const deleteButtons = document.querySelectorAll(".delete-item");
    deleteButtons.forEach((btn) =>
      btn.addEventListener("click", (event) => {
        console.log(typeof parseInt(event.target.id));
        removeItem(parseInt(event.target.id));
        liveCounter();
        updateHTML();
      })
    );
    document.querySelector("p").innerHTML = liveCounter();
  };
  //updated the priority property
  const addItem = (msg) => tasks.push({ id: counter++, text: msg, priority: false });
  //Added function for urgent items
  const addUrgentItem = (msg) => tasks.push({ id: counter++, text: msg, priority: true });

  const removeItem = (id) => (tasks = tasks.filter((task) => task.id !== id));
  //const liveCounter = () => {return `Tasks left: ${tasks.length}`}
  const liveCounter = () => {if (tasks.length > 0) {
    return `Tasks left ${tasks.length}`
  } else{
    //alert('There are no tasks left!')
    return `There are no tasks left`
  }}

  
  document
    .querySelector("#add-item")
    .addEventListener("click", function (event) {
      event.preventDefault();
      let text = document.querySelector("input");
      if (text.value.length > 0){addItem(text.value);
      text.value = "";
      text.value.length > 0;
      liveCounter();
      updateHTML();} else{
        alert('Input Required!')
      }
    });
// for the urgent item addUrgentItem(textUrg.value);
    document
        .querySelector("#urgent-item")
        .addEventListener("click", function (event) {
          event.preventDefault();
          let textUrg = document.querySelector("input");
          console.log(textUrg)
          if (textUrg.value.length > 0) {
            addUrgentItem(textUrg.value);
            textUrg.value = "";
            textUrg.value.length > 0;
            liveCounter();
            updateHTML();
          } else {
            alert('Input Required!')
          }
        });

  updateHTML();
  </script>
</html>
